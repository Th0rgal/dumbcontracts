{
  "schema_version": 1,
  "description": "Interpreter feature-support matrix for Verity's three reference interpreters and the EVMYulLean adapter/builtin bridge.",
  "interpreters": {
    "SpecInterpreter_basic": {
      "file": "Verity/Proofs/Stdlib/SpecInterpreter.lean",
      "entry": "execStmts",
      "description": "Basic scalar reference interpreter for Layer-1 proofs. No fuel parameter, no loops, no internal calls."
    },
    "SpecInterpreter_fuel": {
      "file": "Verity/Proofs/Stdlib/SpecInterpreter.lean",
      "entry": "execStmtsFuel",
      "description": "Fuel-bounded reference interpreter extending the basic path with loops (forEach) and internal calls."
    },
    "IRInterpreter": {
      "file": "Compiler/Proofs/IRGeneration/IRInterpreter.lean",
      "entry": "evalStmts",
      "description": "Fuel-bounded IR interpreter for Layer-2 preservation proofs. Operates on Yul IR statements with abstract storage model."
    },
    "EVMYulLean_bridge": {
      "file": "Compiler/Proofs/YulGeneration/Backends/EvmYulLeanBridgeTest.lean",
      "entry": "evalBuiltinCallViaEvmYulLean",
      "description": "Builtin evaluation bridge delegating pure arithmetic/bitwise/comparison to EVMYulLean UInt256 operations."
    }
  },
  "default_execution_path": "SpecInterpreter_fuel",
  "default_path_rationale": "The fuel-based path supports the full CompilationModel construct set used by verified contracts. The basic path is used only for proofs that do not require loops or internal calls.",
  "expr_features": [
    {
      "feature": "literal",
      "constructor": "Expr.literal",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "supported",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "param",
      "constructor": "Expr.param",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "constructorArg",
      "constructor": "Expr.constructorArg",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "storage",
      "constructor": "Expr.storage",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "supported",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "mapping",
      "constructor": "Expr.mapping",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "supported",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "mappingWord",
      "constructor": "Expr.mappingWord",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "mappingPackedWord",
      "constructor": "Expr.mappingPackedWord",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "mapping2",
      "constructor": "Expr.mapping2",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "mapping2Word",
      "constructor": "Expr.mapping2Word",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "mappingUint",
      "constructor": "Expr.mappingUint",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "structMember",
      "constructor": "Expr.structMember",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "structMember2",
      "constructor": "Expr.structMember2",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "caller",
      "constructor": "Expr.caller",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "supported",
      "EVMYulLean_bridge": "delegated",
      "proof_status": "proved"
    },
    {
      "feature": "msgValue",
      "constructor": "Expr.msgValue",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "blockTimestamp",
      "constructor": "Expr.blockTimestamp",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "contractAddress",
      "constructor": "Expr.contractAddress",
      "SpecInterpreter_basic": "fallback_zero",
      "SpecInterpreter_fuel": "fallback_zero",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "not_modeled"
    },
    {
      "feature": "chainid",
      "constructor": "Expr.chainid",
      "SpecInterpreter_basic": "fallback_zero",
      "SpecInterpreter_fuel": "fallback_zero",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "not_modeled"
    },
    {
      "feature": "mload",
      "constructor": "Expr.mload",
      "SpecInterpreter_basic": "fallback_zero",
      "SpecInterpreter_fuel": "fallback_zero",
      "IRInterpreter": "supported",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "partial"
    },
    {
      "feature": "keccak256",
      "constructor": "Expr.keccak256",
      "SpecInterpreter_basic": "fallback_zero",
      "SpecInterpreter_fuel": "fallback_zero",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "not_modeled"
    },
    {
      "feature": "call",
      "constructor": "Expr.call",
      "SpecInterpreter_basic": "fallback_zero",
      "SpecInterpreter_fuel": "fallback_zero",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "not_modeled"
    },
    {
      "feature": "staticcall",
      "constructor": "Expr.staticcall",
      "SpecInterpreter_basic": "fallback_zero",
      "SpecInterpreter_fuel": "fallback_zero",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "not_modeled"
    },
    {
      "feature": "delegatecall",
      "constructor": "Expr.delegatecall",
      "SpecInterpreter_basic": "fallback_zero",
      "SpecInterpreter_fuel": "fallback_zero",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "not_modeled"
    },
    {
      "feature": "arithmetic",
      "constructor": "Expr.add/sub/mul/div/mod",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "supported",
      "EVMYulLean_bridge": "supported",
      "proof_status": "proved"
    },
    {
      "feature": "bitwise",
      "constructor": "Expr.bitAnd/bitOr/bitXor/bitNot/shl/shr",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "supported",
      "EVMYulLean_bridge": "supported",
      "proof_status": "proved"
    },
    {
      "feature": "comparison",
      "constructor": "Expr.eq/lt/gt/le/ge",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "supported",
      "EVMYulLean_bridge": "supported",
      "proof_status": "proved"
    },
    {
      "feature": "logical",
      "constructor": "Expr.logicalAnd/logicalOr/logicalNot",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "fixed_point_math",
      "constructor": "Expr.mulDivDown/mulDivUp/wMulDown/wDivUp/min/max",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "internalCall_expr",
      "constructor": "Expr.internalCall",
      "SpecInterpreter_basic": "fallback_zero",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "localVar",
      "constructor": "Expr.localVar",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "supported",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "externalCall_expr",
      "constructor": "Expr.externalCall",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "assumed"
    },
    {
      "feature": "arrayLength",
      "constructor": "Expr.arrayLength",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "arrayElement",
      "constructor": "Expr.arrayElement",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "EVMYulLean_bridge": "n/a",
      "proof_status": "proved"
    }
  ],
  "stmt_features": [
    {
      "feature": "letVar",
      "constructor": "Stmt.letVar",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "supported",
      "proof_status": "proved"
    },
    {
      "feature": "assignVar",
      "constructor": "Stmt.assignVar",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "supported",
      "proof_status": "proved"
    },
    {
      "feature": "setStorage",
      "constructor": "Stmt.setStorage",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "supported",
      "proof_status": "proved"
    },
    {
      "feature": "setMapping",
      "constructor": "Stmt.setMapping",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "supported",
      "proof_status": "proved"
    },
    {
      "feature": "setMappingWord",
      "constructor": "Stmt.setMappingWord",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "setMappingPackedWord",
      "constructor": "Stmt.setMappingPackedWord",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "setMapping2",
      "constructor": "Stmt.setMapping2",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "setMapping2Word",
      "constructor": "Stmt.setMapping2Word",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "setMappingUint",
      "constructor": "Stmt.setMappingUint",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "setStructMember",
      "constructor": "Stmt.setStructMember",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "setStructMember2",
      "constructor": "Stmt.setStructMember2",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "require",
      "constructor": "Stmt.require",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "supported",
      "proof_status": "proved"
    },
    {
      "feature": "requireError",
      "constructor": "Stmt.requireError",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "revertError",
      "constructor": "Stmt.revertError",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "return",
      "constructor": "Stmt.return",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "supported",
      "proof_status": "proved"
    },
    {
      "feature": "returnValues",
      "constructor": "Stmt.returnValues",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "returnArray",
      "constructor": "Stmt.returnArray",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "returnBytes",
      "constructor": "Stmt.returnBytes",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "returnStorageWords",
      "constructor": "Stmt.returnStorageWords",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "stop",
      "constructor": "Stmt.stop",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "supported",
      "proof_status": "proved"
    },
    {
      "feature": "ite",
      "constructor": "Stmt.ite",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "supported",
      "proof_status": "proved"
    },
    {
      "feature": "forEach",
      "constructor": "Stmt.forEach",
      "SpecInterpreter_basic": "unsupported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "supported",
      "proof_status": "proved"
    },
    {
      "feature": "emit",
      "constructor": "Stmt.emit",
      "SpecInterpreter_basic": "supported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "internalCall",
      "constructor": "Stmt.internalCall",
      "SpecInterpreter_basic": "unsupported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "internalCallAssign",
      "constructor": "Stmt.internalCallAssign",
      "SpecInterpreter_basic": "unsupported",
      "SpecInterpreter_fuel": "supported",
      "IRInterpreter": "n/a",
      "proof_status": "proved"
    },
    {
      "feature": "mstore",
      "constructor": "Stmt.mstore",
      "SpecInterpreter_basic": "unsupported",
      "SpecInterpreter_fuel": "unsupported",
      "IRInterpreter": "supported",
      "proof_status": "partial"
    },
    {
      "feature": "calldatacopy",
      "constructor": "Stmt.calldatacopy",
      "SpecInterpreter_basic": "no_op",
      "SpecInterpreter_fuel": "no_op",
      "IRInterpreter": "n/a",
      "proof_status": "not_modeled"
    },
    {
      "feature": "returndataCopy",
      "constructor": "Stmt.returndataCopy",
      "SpecInterpreter_basic": "unsupported",
      "SpecInterpreter_fuel": "unsupported",
      "IRInterpreter": "n/a",
      "proof_status": "not_modeled"
    },
    {
      "feature": "revertReturndata",
      "constructor": "Stmt.revertReturndata",
      "SpecInterpreter_basic": "unsupported",
      "SpecInterpreter_fuel": "unsupported",
      "IRInterpreter": "n/a",
      "proof_status": "not_modeled"
    },
    {
      "feature": "rawLog",
      "constructor": "Stmt.rawLog",
      "SpecInterpreter_basic": "unsupported",
      "SpecInterpreter_fuel": "unsupported",
      "IRInterpreter": "n/a",
      "proof_status": "not_modeled"
    },
    {
      "feature": "externalCallBind",
      "constructor": "Stmt.externalCallBind",
      "SpecInterpreter_basic": "unsupported",
      "SpecInterpreter_fuel": "unsupported",
      "IRInterpreter": "n/a",
      "proof_status": "not_modeled"
    },
    {
      "feature": "ecm",
      "constructor": "Stmt.ecm",
      "SpecInterpreter_basic": "unsupported",
      "SpecInterpreter_fuel": "unsupported",
      "IRInterpreter": "n/a",
      "proof_status": "not_modeled"
    }
  ],
  "builtin_features": [
    {
      "feature": "add",
      "verity_path": "supported",
      "evmyullean_bridge": "supported",
      "agreement_proved": true
    },
    {
      "feature": "sub",
      "verity_path": "supported",
      "evmyullean_bridge": "supported",
      "agreement_proved": true
    },
    {
      "feature": "mul",
      "verity_path": "supported",
      "evmyullean_bridge": "supported",
      "agreement_proved": true
    },
    {
      "feature": "div",
      "verity_path": "supported",
      "evmyullean_bridge": "supported",
      "agreement_proved": true
    },
    {
      "feature": "mod",
      "verity_path": "supported",
      "evmyullean_bridge": "supported",
      "agreement_proved": true
    },
    {
      "feature": "lt",
      "verity_path": "supported",
      "evmyullean_bridge": "supported",
      "agreement_proved": true
    },
    {
      "feature": "gt",
      "verity_path": "supported",
      "evmyullean_bridge": "supported",
      "agreement_proved": true
    },
    {
      "feature": "eq",
      "verity_path": "supported",
      "evmyullean_bridge": "supported",
      "agreement_proved": true
    },
    {
      "feature": "iszero",
      "verity_path": "supported",
      "evmyullean_bridge": "supported",
      "agreement_proved": true
    },
    {
      "feature": "and",
      "verity_path": "supported",
      "evmyullean_bridge": "supported",
      "agreement_proved": true
    },
    {
      "feature": "or",
      "verity_path": "supported",
      "evmyullean_bridge": "supported",
      "agreement_proved": true
    },
    {
      "feature": "xor",
      "verity_path": "supported",
      "evmyullean_bridge": "supported",
      "agreement_proved": true
    },
    {
      "feature": "not",
      "verity_path": "supported",
      "evmyullean_bridge": "supported",
      "agreement_proved": true
    },
    {
      "feature": "shl",
      "verity_path": "supported",
      "evmyullean_bridge": "supported",
      "agreement_proved": true
    },
    {
      "feature": "shr",
      "verity_path": "supported",
      "evmyullean_bridge": "supported",
      "agreement_proved": true
    },
    {
      "feature": "sload",
      "verity_path": "supported",
      "evmyullean_bridge": "delegated",
      "agreement_proved": false
    },
    {
      "feature": "caller",
      "verity_path": "supported",
      "evmyullean_bridge": "delegated",
      "agreement_proved": false
    },
    {
      "feature": "calldataload",
      "verity_path": "supported",
      "evmyullean_bridge": "delegated",
      "agreement_proved": false
    },
    {
      "feature": "mappingSlot",
      "verity_path": "supported",
      "evmyullean_bridge": "delegated",
      "agreement_proved": false
    }
  ],
  "status_legend": {
    "supported": "Fully handled; returns computed result",
    "unsupported": "Not handled; causes revert or returns none",
    "fallback_zero": "Returns 0 (feature not modeled in this interpreter)",
    "no_op": "Silently ignored (safe because the feature is a codegen concern, not a semantic one)",
    "delegated": "Handled by the Verity-native path; EVMYulLean bridge returns none",
    "n/a": "Feature does not exist at this layer of the pipeline"
  },
  "proof_status_legend": {
    "proved": "Lean theorem with no sorry; covered by Layer 1-3 preservation chain",
    "assumed": "Covered by explicit axiom (e.g., external function behavior)",
    "partial": "Single-word memory model only; full linear memory not modeled",
    "not_modeled": "Feature is not in the proof-backed subset; compiler handles it correctly but proofs do not cover it"
  }
}
